#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yGLTEX.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yGLTEX_priv.h               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  




#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SHARED   -a-  (READ) create a blank testing image                                0s   blank           ygltex_save_image                                                            ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ygltex__unit_quiet                                                                                                                i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char         *x_name  = "/tmp/ygltex_test.png";                                                                                                                                                                                
     local    create working variable              - - - - - - - - - - - - -   FILE         *f       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_structp  *s       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *i       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   int           x_wide  =   32;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   int           x_tall  =   65;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   int          *r       =    0;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_byte     *x_image = NULL;                                                                                                                                                                                                 
     local    create working variable              - - - - - - - - - - - - -   png_bytep    *x_rows  = NULL;                                                                                                                                                                                                 

   COND       open new image for writing                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'W'      , NULL     , NULL     , &f                                                  i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       create a new header                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_save_header          f        , &s       , &i                                                                              i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_exists    0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_exists    0                                                                                                    
     exec     call attrib                          ygltex_save_attrib          s        , i        , x_wide   , x_tall   , &r                                                        i_equal     0                                                                                                    
     echo     ... check row bytes                  - - - - - - - - - - - - -   r                                                                                                     i_equal     128                                                                                                  

   COND       allocate image                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call allocate                        ygltex_image_alloc          x_wide   , x_tall   , r        , &x_image , &x_rows                                                   i_equal     0                                                                                                    
     echo     ... check image                      - - - - - - - - - - - - -   x_image                                                                                               p_exists    0                                                                                                    
     echo     ... check rows                       - - - - - - - - - - - - -   x_rows                                                                                                p_exists    0                                                                                                    

   COND       saving the image                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     save image                           ygltex_save_image           s        , i        , x_image  , x_rows   , YGLTEX_IMAGE   , x_wide   , x_tall                        i_equal     0                                                                                                    

   COND       free allocation                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call free                            ygltex_image_free           &x_image , &x_rows                                                                                    i_equal     0                                                                                                    
     echo     ... check image                      - - - - - - - - - - - - -   x_image                                                                                               p_null      0                                                                                                    
     echo     ... check rows                       - - - - - - - - - - - - -   x_rows                                                                                                p_null      0                                                                                                    

   COND       destroy data and close file                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call free                            ygltex_save_free            &s       , &i                                                                                         i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     exec     call close                           ygltex_file_close           NULL     , NULL     , &f                                                                              i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (READ) verify saving new header                                    0s   header          ygltex_read_header, ygltex_read_free                                         ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ygltex__unit_quiet                                                                                                                i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char         *x_name  = "/tmp/ygltex_test.png";                                                                                                                                                                                
     local    create working variable              - - - - - - - - - - - - -   FILE         *f       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_structp  *s       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *i       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *e       = NULL;                                                                                                                                                                                                  
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    

   COND       attempt a png header without file open                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_read_header          f        , &s       , &i       , &e                                                                   i_lesser    0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_null      0                                                                                                    

   REUSE -a-  create a blank testing image                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       open a new file for reading                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'R'      , NULL     , NULL     , &f                                                  i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       attempt header with NULLs                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_read_header          f        , NULL     , &i       , &e                                                                   i_lesser    0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     exec     call header                          ygltex_read_header          f        , &s       , NULL     , &e                                                                   i_lesser    0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     exec     call header                          ygltex_read_header          f        , &s       , &i       , NULL                                                                 i_lesser    0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    

   COND       verify reading png header                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_read_header          f        , &s       , &i       , &e                                                                   i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_exists    0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_exists    0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_exists    0                                                                                                    

   COND       attempt to re-create header                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_read_header          f        , &s       , &i       , &e                                                                   i_lesser    0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_exists    0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_exists    0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_exists    0                                                                                                    

   COND       verify freeing headers                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call free                            ygltex_read_free            &s       , &i       , &e                                                                              i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_null      0                                                                                                    

   COND       close file                                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           NULL     , NULL     , &f                                                                              i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     exec     stop testing                         ygltex__unit_end                                                                                                                  i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (READ) verify reading attributes                                   0s   attrib          ygltex_read_attrib                                                           ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ygltex__unit_quiet                                                                                                                i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char         *x_name  = "/tmp/ygltex_test.png";                                                                                                                                                                                
     local    create working variable              - - - - - - - - - - - - -   FILE         *f       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_structp  *s       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *i       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *e       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   int          x_wide, x_tall, x_color, x_depth, x_chan, x_rbyte;                                                                                                                                                                
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    

   COND       attempt to read attributes before anything                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call attrib                          ygltex_read_attrib          f        , s        , i        , &x_wide  , &x_tall  , &x_color , &x_depth , &x_rbyte , &x_chan       i_lesser    0                                                                                                    
     echo     ... check wide                       - - - - - - - - - - - - -   x_wide                                                                                                i_equal     0                                                                                                    
     echo     ... check tall                       - - - - - - - - - - - - -   x_tall                                                                                                i_equal     0                                                                                                    
     echo     ... check color                      - - - - - - - - - - - - -   x_color                                                                                               i_equal     0                                                                                                    
     echo     ... check depth                      - - - - - - - - - - - - -   x_depth                                                                                               i_equal     0                                                                                                    
     echo     ... check rowbyte                    - - - - - - - - - - - - -   x_rbyte                                                                                               i_equal     0                                                                                                    
     echo     ... check channel                    - - - - - - - - - - - - -   x_chan                                                                                                i_equal     0                                                                                                    

   REUSE -a-  create a blank testing image                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       attempt to read attributes before openning file                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call attrib                          ygltex_read_attrib          f        , s        , i        , &x_wide  , &x_tall  , &x_color , &x_depth , &x_rbyte , &x_chan       i_lesser    0                                                                                                    
     echo     ... check wide                       - - - - - - - - - - - - -   x_wide                                                                                                i_equal     0                                                                                                    
     echo     ... check tall                       - - - - - - - - - - - - -   x_tall                                                                                                i_equal     0                                                                                                    
     echo     ... check color                      - - - - - - - - - - - - -   x_color                                                                                               i_equal     0                                                                                                    
     echo     ... check depth                      - - - - - - - - - - - - -   x_depth                                                                                               i_equal     0                                                                                                    
     echo     ... check rowbyte                    - - - - - - - - - - - - -   x_rbyte                                                                                               i_equal     0                                                                                                    
     echo     ... check channel                    - - - - - - - - - - - - -   x_chan                                                                                                i_equal     0                                                                                                    

   COND       open a new file for reading                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'R'      , NULL     , NULL     , &f                                                  i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       attempt to read attributes before header                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call attrib                          ygltex_read_attrib          f        , s        , i        , &x_wide  , &x_tall  , &x_color , &x_depth , &x_rbyte , &x_chan       i_lesser    0                                                                                                    
     echo     ... check wide                       - - - - - - - - - - - - -   x_wide                                                                                                i_equal     0                                                                                                    
     echo     ... check tall                       - - - - - - - - - - - - -   x_tall                                                                                                i_equal     0                                                                                                    
     echo     ... check color                      - - - - - - - - - - - - -   x_color                                                                                               i_equal     0                                                                                                    
     echo     ... check depth                      - - - - - - - - - - - - -   x_depth                                                                                               i_equal     0                                                                                                    
     echo     ... check rowbyte                    - - - - - - - - - - - - -   x_rbyte                                                                                               i_equal     0                                                                                                    
     echo     ... check channel                    - - - - - - - - - - - - -   x_chan                                                                                                i_equal     0                                                                                                    

   COND       verify reading png header                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_read_header          f        , &s       , &i       , &e                                                                   i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_exists    0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_exists    0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_exists    0                                                                                                    

   COND       verify reading attributes                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call attrib                          ygltex_read_attrib          f        , s        , i        , &x_wide  , &x_tall  , &x_color , &x_depth , &x_rbyte , &x_chan       i_equal     0                                                                                                    
     echo     ... check wide                       - - - - - - - - - - - - -   x_wide                                                                                                i_equal     32                                                                                                   
     echo     ... check tall                       - - - - - - - - - - - - -   x_tall                                                                                                i_equal     65                                                                                                   
     echo     ... check color                      - - - - - - - - - - - - -   x_color                                                                                               i_equal     6                                                                                                    
     echo     ... check depth                      - - - - - - - - - - - - -   x_depth                                                                                               i_equal     8                                                                                                    
     echo     ... check rowbyte                    - - - - - - - - - - - - -   x_rbyte                                                                                               i_equal     128                                                                                                  
     echo     ... check channel                    - - - - - - - - - - - - -   x_chan                                                                                                i_equal     4                                                                                                    

   COND       verify freeing headers                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call free                            ygltex_read_free            &s       , &i       , &e                                                                              i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_null      0                                                                                                    

   COND       attempt to read attributes after freeing                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call attrib                          ygltex_read_attrib          f        , s        , i        , &x_wide  , &x_tall  , &x_color , &x_depth , &x_rbyte , &x_chan       i_lesser    0                                                                                                    
     echo     ... check wide                       - - - - - - - - - - - - -   x_wide                                                                                                i_equal     0                                                                                                    
     echo     ... check tall                       - - - - - - - - - - - - -   x_tall                                                                                                i_equal     0                                                                                                    
     echo     ... check color                      - - - - - - - - - - - - -   x_color                                                                                               i_equal     0                                                                                                    
     echo     ... check depth                      - - - - - - - - - - - - -   x_depth                                                                                               i_equal     0                                                                                                    
     echo     ... check rowbyte                    - - - - - - - - - - - - -   x_rbyte                                                                                               i_equal     0                                                                                                    
     echo     ... check channel                    - - - - - - - - - - - - -   x_chan                                                                                                i_equal     0                                                                                                    

   COND       close file                                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           NULL     , NULL     , &f                                                                              i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     exec     stop testing                         ygltex__unit_end                                                                                                                  i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (READ) verify reading image                                        0s   image           ygltex_read_attrib                                                           ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ygltex__unit_quiet                                                                                                                i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char         *x_name  = "/tmp/ygltex_test.png";                                                                                                                                                                                
     local    create working variable              - - - - - - - - - - - - -   FILE         *f       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_structp  *s       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *i       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   png_infop    *e       = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   int          x_wide, x_tall, x_color, x_depth, x_chan, x_rbyte;                                                                                                                                                                
     local    create working variable              - - - - - - - - - - - - -   png_byte     *x_image = NULL;                                                                                                                                                                                                 
     local    create working variable              - - - - - - - - - - - - -   png_bytep    *x_rows  = NULL;                                                                                                                                                                                                 
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    

   COND       attempt to read image before anything else                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    

   REUSE -a-  create a blank testing image                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       attempt to read image before openning                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    

   COND       open a new file for reading                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'R'      , NULL     , NULL     , &f                                                  i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       attempt to read image before header                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    

   COND       read png header                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call header                          ygltex_read_header          f        , &s       , &i       , &e                                                                   i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_exists    0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_exists    0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_exists    0                                                                                                    

   COND       attempt to read image before attributes                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    

   COND       read attributes                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call attrib                          ygltex_read_attrib          f        , s        , i        , &x_wide  , &x_tall  , &x_color , &x_depth , &x_rbyte , &x_chan       i_equal     0                                                                                                    
     echo     ... check wide                       - - - - - - - - - - - - -   x_wide                                                                                                i_equal     32                                                                                                   
     echo     ... check tall                       - - - - - - - - - - - - -   x_tall                                                                                                i_equal     65                                                                                                   
     echo     ... check color                      - - - - - - - - - - - - -   x_color                                                                                               i_equal     6                                                                                                    
     echo     ... check depth                      - - - - - - - - - - - - -   x_depth                                                                                               i_equal     8                                                                                                    
     echo     ... check rowbyte                    - - - - - - - - - - - - -   x_rbyte                                                                                               i_equal     128                                                                                                  
     echo     ... check channel                    - - - - - - - - - - - - -   x_chan                                                                                                i_equal     4                                                                                                    

   COND       attempt to read image before allocation                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    

   COND       allocate image                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call allocate                        ygltex_image_alloc          x_wide   , x_tall   , x_rbyte  , &x_image , &x_rows                                                   i_equal     0                                                                                                    
     echo     ... check image                      - - - - - - - - - - - - -   x_image                                                                                               p_exists    0                                                                                                    
     echo     ... check rows                       - - - - - - - - - - - - -   x_rows                                                                                                p_exists    0                                                                                                    

   COND       verify reading image                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_equal     0                                                                                                    

   COND       free image                                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call free                            ygltex_image_free           &x_image , &x_rows                                                                                    i_equal     0                                                                                                    
     echo     ... check image                      - - - - - - - - - - - - -   x_image                                                                                               p_null      0                                                                                                    
     echo     ... check rows                       - - - - - - - - - - - - -   x_rows                                                                                                p_null      0                                                                                                    

   COND       attempt to read image after deallocation                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    

   COND       free headers                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call free                            ygltex_read_free            &s       , &i       , &e                                                                              i_equal     0                                                                                                    
     echo     ... check structure                  - - - - - - - - - - - - -   s                                                                                                     p_null      0                                                                                                    
     echo     ... check info header                - - - - - - - - - - - - -   i                                                                                                     p_null      0                                                                                                    
     echo     ... check end header                 - - - - - - - - - - - - -   e                                                                                                     p_null      0                                                                                                    

   COND       close file                                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           NULL     , NULL     , &f                                                                              i_equal     0                                                                                                    
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       attempt to read image after closed                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ygltex_read_image           s        , x_image  , x_rows   , YGLTEX_IMAGE  , x_wide   , x_tall   , NULL                           i_lesser    0                                                                                                    


   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     exec     stop testing                         ygltex__unit_end                                                                                                                  i_equal     0                                                                                                    


