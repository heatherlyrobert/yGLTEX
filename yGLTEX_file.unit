#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yGLTEX.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yGLTEX_priv.h               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (FILE) verify openning and closing text file                       0s   file            ygltex_file_open, ygltex_file_close                                          ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ygltex__unit_quiet                                                                                                                i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char     *x_name  = "/tmp/ygltex_test.txt";                                                                                                                                                                                
     local    create working variable              - - - - - - - - - - - - -   char     a        = '·';                                                                                                                                                                                                   
     local    create working variable              - - - - - - - - - - - - -   char     n        [LEN_PATH] = "";                                                                                                                                                                                         
     local    create working variable              - - - - - - - - - - - - -   FILE     *f       = NULL;                                                                                                                                                                                                  

   COND       attempt to open non-existant file                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove file                          yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     exec     call open                            ygltex_file_open            x_name         , 'r'      , n        , &a       , &f                                                  i_lesser    0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     åæ                                                                                                   
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     '-'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       attempt to close a non-open file                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           n        , &a       , &f                                                                              i_lesser    0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     åæ                                                                                                   
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     '-'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       attempt to open valid file with no pointer                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create file                          yURG_touch                  x_name                                             , "root"    , "root"       , "0600"                i_equal     0                                                                                                    
     exec     call open                            ygltex_file_open            x_name         , 'r'      , n        , &a       , NULL                                                i_lesser    0                                                                                                    

   COND       verify openning valid file                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'r'      , n        , &a       , &f                                                  i_equal     0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     å/tmp/ygltex_test.txtæ                                                                               
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     'r'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       attempt to re-open file                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'r'      , n        , &a       , &f                                                  i_lesser    0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     å/tmp/ygltex_test.txtæ                                                                               
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     'r'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       attempt to close with a NULL                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           n        , &a       , NULL                                                                            i_lesser    0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     å/tmp/ygltex_test.txtæ                                                                               
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     'r'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       verify closing file                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           n        , &a       , &f                                                                              i_equal     0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     åæ                                                                                                   
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     '-'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       attempt to close a non-open file                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           n        , &a       , &f                                                                              i_lesser    0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     åæ                                                                                                   
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     '-'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       verify openning for writing                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            ygltex_file_open            x_name         , 'w'      , n        , &a       , &f                                                  i_equal     0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     å/tmp/ygltex_test.txtæ                                                                               
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     'w'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_exists    0                                                                                                    

   COND       verify closing file                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           ygltex_file_close           n        , &a       , &f                                                                              i_equal     0                                                                                                    
     echo     ... check name                       - - - - - - - - - - - - -   n                                                                                                     w_equal     åæ                                                                                                   
     echo     ... check access                     - - - - - - - - - - - - -   a                                                                                                     c_equal     '-'                                                                                                  
     echo     ... check pointer                    - - - - - - - - - - - - -   f                                                                                                     p_null      0                                                                                                    

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         ygltex__unit_end                                                                                                                  i_equal     0                                                                                                    


